{"version":3,"file":"HttpLayerRouter.js","names":["HttpServerRequest","HttpServerResponse","Arr","Context","Effect","FiberRef","compose","constant","dual","identity","Layer","Option","Scope","Tracer","FindMyWay","HttpApiBuilder","HttpMiddleware","RouteContext","RouteContextTypeId","HttpServer","HttpServerError","OpenApi","TypeId","Symbol","for","HttpRouter","GenericTag","make","gen","router","RouterConfig","addAll","routes","contextWith","context","middleware","getMiddleware","applyMiddleware","effect","i","length","route","makeRoute","handler","method","all","path","on","of","prefixed","prefix","asHttpEffect","newPrefix","prefixPath","map","prefixRoute","add","options","isEffect","flatMap","uninterruptible","some","withFiberRuntime","fiber","contextMap","Map","currentContext","unsafeMap","request","get","key","result","find","url","undefined","fail","RouteNotFound","_tag","set","sliceRequestUrl","value","ParsedSearchParams","searchParams","params","span","ParentSpan","attribute","locally","interruptible","unsafeMake","prefexLen","modify","slice","Reference","defaultValue","schemaJson","schemaNoBody","schemaParams","schemaPathParams","use","f","scopedDiscard","toAdd","layer","toHttpEffect","appLayer","scope","memoMap","CurrentMemoMap","buildWithMemoMap","provideMerge","RouteTypeId","none","removeTrailingSlash","endsWith","self","match","onNone","onSome","existingPrefix","MiddlewareTypeId","arguments","makeMiddleware","MiddlewareImpl","scopedContext","fn","fnContextKey","succeedContext","middlewareId","layerFn","dependencies","constructor","contextKey","stack","depsContext","push","pipe","provide","combine","other","middlewareCache","WeakMap","arr","topLevel","empty","maxLength","startsWith","Set","fromIterable","reverse","cors","disableLogger","withLoggerDisabled","addHttpApi","api","ApiMiddleware","buildMiddleware","Router","unwrap","fnUntraced","router_","openapiPath","spec","fromApi","succeed","unsafeJson","effectDiscard","serve","logger","RouterLayer","routerConfig","unwrapScoped","disableListenLog","withLogAddress"],"sources":["../../src/HttpLayerRouter.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}