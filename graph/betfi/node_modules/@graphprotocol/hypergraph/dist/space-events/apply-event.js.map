{"version":3,"file":"apply-event.js","names":["secp256k1","sha256","Effect","Schema","canonicalize","stringToUint8Array","hashEvent","InvalidEventError","SpaceEvent","VerifySignatureError","decodeSpaceEvent","decodeUnknownEither","applyEvent","state","event","rawEvent","getVerifiedIdentity","decodedEvent","_tag","left","right","transaction","type","undefined","fail","previousEventHash","lastEventHash","encodedTransaction","signatureInstance","Signature","fromCompact","author","signature","hex","addRecoveryBit","recovery","authorPublicKey","recoverPublicKey","toHex","gen","identity","accountAddress","signaturePublicKey","id","members","removedMembers","invitations","inboxes","creatorAccountAddress","role","result","Object","entries","find","invitation","inviteeAccountAddress","values","inboxId","encryptionPublicKey","isPublic","authPolicy","secretKey"],"sources":["../../src/space-events/apply-event.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}