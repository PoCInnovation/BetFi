{"version":3,"file":"identity-encryption.js","names":["gcm","randomBytes","hkdf","sha256","verifyMessage","bytesToHex","canonicalize","hexToBytes","hkdfDeriveKey","secret","salt","encrypt","msg","hkdfSalt","gcmNonce","derivedKey","aes","ciphertext","ciphertextJson","aes256GcmHkdfSha256","payload","TextEncoder","encode","decrypt","TextDecoder","decode","JSON","parse","signatureMessage","nonce","encryptIdentity","signer","keys","message","signature","signMessage","valid","address","getAddress","Error","secretKey","keysTxt","encryptionPublicKey","encryptionPrivateKey","signaturePublicKey","signaturePrivateKey","join","keysMsg","decryptIdentity","e","length","lastByte","newSecret","slice","Uint8Array","split","encryptAppIdentity","appIdentityAddress","appIdentityAddressPrivateKey","permissionId","decryptAppIdentity","addressPrivateKey"],"sources":["../../src/connect/identity-encryption.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}