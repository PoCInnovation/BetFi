{"version":3,"file":"login.js","names":["Schema","privateKeyToAccount","proveIdentityOwnership","Messages","store","loadAccountAddress","storeAccountAddress","storeKeys","createIdentityKeys","decryptIdentity","encryptIdentity","addSmartAccountOwner","getSmartAccountWalletClient","isSmartAccountDeployed","smartAccountNeedsUpdate","updateLegacySmartAccount","identityExists","accountAddress","syncServerUri","res","fetch","URL","method","status","signup","signer","walletClient","smartAccountClient","addressStorage","keysStorage","identityToken","chain","rpcUrl","keys","ciphertext","nonce","localAccount","signaturePrivateKey","address","localSmartAccountClient","owner","accountProof","keyProof","req","keyBox","getAddress","signaturePublicKey","encryptionPublicKey","headers","body","JSON","stringify","Error","decoded","decodeUnknownSync","ResponseConnectCreateIdentity","json","success","restoreKeys","ResponseIdentityEncrypted","getAndUpdateSmartAccount","accountAddressFromStorage","smartAccountParams","smartAccountWalletClient","account","console","log","login","authData","exists","send","type","sessionToken"],"sources":["../../src/connect/login.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}