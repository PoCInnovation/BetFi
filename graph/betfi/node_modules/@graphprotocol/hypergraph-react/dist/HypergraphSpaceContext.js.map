{"version":3,"file":"HypergraphSpaceContext.js","names":["Entity","store","useSelector","Schema","createContext","useContext","useEffect","useLayoutEffect","useMemo","useRef","useSyncExternalStore","useHypergraphApp","usePublicSpace","HypergraphReactContext","undefined","useHypergraphSpaceInternal","context","space","HypergraphSpaceProvider","children","_jsx","Provider","value","subscribeToSpaceCache","Map","useSubscribeToSpaceAndGetHandle","spaceId","enabled","handle","state","spaces","find","id","automergeDocHandle","subscribeToSpace","isConnecting","has","set","delete","useSpace","options","spaceIdFromContext","spaceIdFromParams","mode","ready","isReady","privateSpace","publicSpace","name","useCreateEntity","type","spaceFromContext","Error","create","useUpdateEntity","update","useDeleteEntity","markAsDeleted","useRemoveRelation","removeRelation","useHardDeleteEntity","useQueryLocal","params","filter","include","spaceFromParams","entitiesRef","subscriptionRef","subscribe","getEntities","current","handleIsReady","subscription","subscribeToFindMany","allEntities","entities","deletedEntities","entity","__deleted","push","useQueryEntity","prevEntityRef","equals","equivalence","callback","handleChange","handleDelete","on","off","doc","found","findOne"],"sources":["../src/HypergraphSpaceContext.tsx"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}