{"version":3,"file":"use-query.js","names":["Type","Utils","useQueryLocal","useQueryPublic","mergeEntities","publicEntities","localEntities","localDeletedEntities","mergedData","entity","deletedEntity","find","e","id","localEntity","mergedEntity","key","push","localEntitiesNotInPublic","filter","some","p","getDiff","type","deletedEntities","updatedEntities","diff","field","Object","entries","fields","isRelationField","relationIds","map","localRelationIds","length","includes","removedIds","addedIds","unchangedIds","current","new","Date","getTime","Url","toString","Point","join","keys","newEntities","preparePublishDummy","undefined","useQuery","params","mode","include","space","first","publicResult","enabled","localResult","deleted","preparePublish","data","entities"],"sources":["../src/use-query.tsx"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}