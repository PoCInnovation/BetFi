{"version":3,"file":"prepare-publish.js","names":["Graph","Type","store","request","gql","GEO_API_TESTNET_ENDPOINT","entityToPublishQueryDocument","preparePublish","entity","publicSpace","data","entityId","id","spaceId","mapping","getSnapshot","context","typeName","type","mappingEntry","Error","ops","values","relations","fields","__schema","key","propertyId","Object","entries","properties","serializedValue","Checkbox","serializeCheckbox","Date","serializeDate","Point","serializePoint","Number","serializeNumber","push","property","value","relationId","map","relationEntity","newRelation","toEntity","_relation","position","createOps","createEntity","types","typeIds","existingValue","valuesList","find","length","updateEntityOps","updateEntity"],"sources":["../src/prepare-publish.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}